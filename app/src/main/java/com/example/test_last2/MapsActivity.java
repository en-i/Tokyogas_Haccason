package com.example.test_last2;

import androidx.appcompat.app.AppCompatActivity;
import androidx.core.app.ActivityCompat;
import androidx.core.content.ContextCompat;
import androidx.annotation.NonNull;
import android.os.Bundle;
import android.content.pm.PackageManager;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.widget.TextView;
import android.content.Intent;
import android.provider.Settings;
import android.util.Log;
import android.widget.Toast;
import android.Manifest;

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.content.Intent;
import android.net.Uri;

import java.util.Locale;
import java.util.Random;
import java.util.Map;
import java.util.Map.Entry;
import java.util.HashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

public class MapsActivity extends AppCompatActivity implements LocationListener {
    LocationManager locationManager;
    //熊本県のデータ
    double[] x_data = {32.789046,
            32.787735,
            32.783234,
            32.784081,
            32.775036,
            32.77464589,
            32.80239,
            32.803535,
            32.8065863427537,
            32.800929,
            32.798861,
            32.801929,
            32.80339,
            32.797825,
            32.794533,
            32.80003629,
            32.804308,
            32.811298,
            32.80193,
            32.807334,
            32.802307,
            32.801179,
            32.814575,
            32.816408,
            32.817869,
            32.815799,
            32.816174,
            32.81121293,
            32.817782,
            32.81983876,
            32.82008,
            32.797031,
            32.789394,
            32.787578,
            32.791475,
            32.793877,
            32.81301698,
            32.81728,
            32.81789,
            32.795878,
            32.79594238,
            32.808347,
            32.808708,
            32.799777,
            32.802677,
            32.793042,
            32.787241,
            32.786891,
            32.792407,
            32.794474,
            32.7900746263823,
            32.785117,
            32.809114,
            32.805159,
            32.803944,
            32.799883,
            32.80634,
            32.790061,
            32.79352,
            32.78826447,
            32.784347,
            32.780935,
            32.792637,
            32.771161,
            32.772485,
            32.774973,
            32.77058829,
            32.7758746,
            32.77573027,
            32.776778,
            32.76688948,
            32.767193,
            32.76411077,
            32.793805,
            32.790850283483,
            32.79161398,
            32.784179,
            32.783309,
            32.781329,
            32.779311,
            32.783268,
            32.781434,
            32.781405,
            32.788308,
            32.782509,
            32.839182,
            32.833972,
            32.821374,
            32.824541,
            32.824024,
            32.827905,
            32.817545,
            32.824587,
            32.805075,
            32.812627,
            32.81408,
            32.809762,
            32.801826,
            32.813052,
            32.809566,
            32.812435,
            32.811814,
            32.786564,
            32.78197,
            32.798119,
            32.797129,
            32.799699,
            32.772732,
            32.825171,
            32.820992,
            32.821846,
            32.824062,
            32.790488,
            32.78602,
            32.789091,
            32.7768502346275,
            32.778943,
            32.782574,
            32.776336,
            32.789842,
            32.790388,
            32.836669,
            32.828409,
            32.841892,
            32.828426,
            32.778041,
            32.782695,
            32.77426889,
            32.77571062,
            32.80565366,
            32.80685386,
            32.813785,
            32.810786,
            32.777815,
            32.779347,
            32.77566202,
            32.784237,
            32.76667,
            32.76686,
            32.773807,
            32.817577,
            32.822749,
            32.816554,
            32.825547,
            32.782321,
            32.812419,
            32.797802,
            32.796715,
            32.842398,
            32.841102,
            32.843362,
            32.763369,
            32.760083,
            32.75776,
            32.769027,
            32.754662,
            32.75444,
            32.75008,
            32.730577,
            32.734407,
            32.732919,
            32.717522,
            32.739586,
            32.7438,
            32.743748,
            32.73657896,
            32.73136252,
            32.748239,
            32.751467,
            32.741673,
            32.767956,
            32.772271,
            32.776677,
            32.770593,
            32.774204,
            32.762991,
            32.758796,
            32.714091,
            32.707161,
            32.716065,
            32.731069,
            32.766734,
            32.776944,
            32.765077,
            32.764194,
            32.766682,
            32.754308,
            32.749253,
            32.766221,
            32.758057,
            32.758665,
            32.76218,
            32.748779,
            32.761745,
            32.763349,
            32.755067,
            32.763295,
            32.708973,
            32.70785024,
            32.707404,
            32.71029,
            32.708173,
            32.724549,
            32.72316882,
            32.725853,
            32.690114,
            32.852321,
            32.855854,
            32.896477,
            32.869936,
            32.870162,
            32.867834,
            32.851333,
            32.8478695941107,
            32.896659,
            32.888723,
            32.902724,
            32.905268,
            32.912771,
            32.903881,
            32.90804745,
            32.841336,
            32.83281,
            32.829574,
            32.822905,
            32.849235,
            32.849718,
            32.844985,
            32.834114,
            32.962701,
            32.844132,
            32.84450051,
            32.837635,
            32.836342,
            32.844744,
            32.82868442,
            32.91052,
            32.908291,
            32.853621,
            32.839635,
            32.864902,
            32.84675,
            32.865291,
            32.848313,
            32.848279,
            32.848246,
            32.841351,
            32.883109,
            32.860232,
            32.861901311712,
            32.854032,
            32.8561,
            32.856207,
            32.853093,
            32.937435,
            32.919603,
            32.944999,
            32.941058,
            32.934364,
            32.50473737,
            32.54394448,
            32.44372485,
            32.4322344,
            32.3819193,
            32.41123396,
            32.51615217,
            32.43547009,
            32.49742503,
            32.54750599,
            32.54585143,
            32.54568,
            32.50177387,
            32.51522578,
            32.508643,
            32.56199167,
            32.52917627,
            32.57583142,
            32.48504804,
            32.48960356,
            32.48540003,
            32.53543988,
            32.48708486,
            32.46988906,
            32.55967579,
            32.507074,
            32.40722526,
            32.51934186,
            32.49930276,
            32.51841666,
            32.50918389,
            32.56292583,
            32.45272993,
            32.45889582,
            32.46784147,
            32.46986483,
            32.39679503,
            32.53504136,
            32.43494402,
            32.53938842,
            32.55611767,
            32.54563813,
            32.53443506,
            32.50995186,
            32.43366727,
            32.49857756,
            32.49647921,
            32.51130984,
            32.51062182,
            32.43557204,
            32.4921539,
            32.50931462,
            32.50952565,
            32.43915966,
            32.48907642,
            32.51879747,
            32.53419462,
            32.47659944,
            32.51732334,
            32.53759969,
            32.51909364,
            32.48055423,
            32.43923656,
            32.48753299,
            32.50133405,
            32.40740252,
            32.47019723,
            32.39825156,
            32.4836461,
            32.42573795,
            32.53706961,
            32.50786089,
            32.53002076,
            32.498734,
            32.40339896,
            32.53647209,
            32.53608905,
            32.5608606,
            32.41361195,
            32.50565184,
            32.4871456,
            32.56085133,
            32.42672103,
            32.44301094,
            32.41724114,
            32.43589398,
            32.41842623,
            32.40487122,
            32.43233721,
            32.53859241,
            32.43362079,
            32.53896724,
            32.50686011,
            32.51602016,
            32.51850409,
            32.51923057,
            32.5107344,
            32.4772137,
            32.48793666,
            32.47587042,
            32.56789406,
            32.56059139,
            32.5058486,
            32.55325331,
            32.49794417,
            32.59045449,
            32.53033211,
            32.49239027,
            32.50732987,
            32.50725344,
            32.49131306,
            32.56516623,
            32.54839428,
            32.53682354,
            32.57360857,
            32.54354401,
            32.48794646,
            32.2161696421823,
            32.2079236455698,
            32.220316,
            32.230209,
            32.211099,
            32.229309,
            32.2192837416634,
            32.21902081,
            32.22010185,
            32.203725,
            32.20307298,
            32.19618772,
            32.197378,
            32.13821225,
            32.1627636087486,
            32.1678631334136,
            32.16311136,
            32.206405,
            32.205616,
            32.20699036,
            32.19031104,
            32.21621412,
            32.21811533,
            32.21096201,
            32.22480555,
            32.2220635899078,
            32.23171569,
            32.232907,
            32.2044979642665,
            32.982109,
            32.975411,
            32.999883,
            33.000437,
            32.984913,
            32.99083,
            32.960654,
            32.966522,
            32.949563};
    double y_data[] = {130.731203,
            130.728165,
            130.7306183,
            130.726848,
            130.728094,
            130.7399497,
            130.69506,
            130.692925,
            130.702027224114,
            130.700024,
            130.725085,
            130.725461,
            130.722104,
            130.721046,
            130.722009,
            130.7261754,
            130.729448,
            130.72325,
            130.749869,
            130.758215,
            130.741402,
            130.74504,
            130.720253,
            130.731902,
            130.715085,
            130.714035,
            130.725568,
            130.725341,
            130.722946,
            130.720156,
            130.717069,
            130.701795,
            130.700032,
            130.698705,
            130.694759,
            130.702732,
            130.710128,
            130.704112,
            130.704457,
            130.695933,
            130.6956943,
            130.709322,
            130.708212,
            130.712517,
            130.716847,
            130.713765,
            130.738785,
            130.740052,
            130.747132,
            130.740412,
            130.734740518372,
            130.736607,
            130.718431,
            130.714967,
            130.735808,
            130.729586,
            130.732673,
            130.719695,
            130.72094,
            130.7075609,
            130.70534,
            130.71715,
            130.708133,
            130.773298,
            130.771715,
            130.767996,
            130.7718776,
            130.7690237,
            130.7775639,
            130.753034,
            130.7561062,
            130.739992,
            130.7344769,
            130.754073,
            130.757077955045,
            130.753283,
            130.752403,
            130.750479,
            130.748048,
            130.754102,
            130.764276,
            130.76483,
            130.776701,
            130.781765,
            130.782984,
            130.77401,
            130.771003,
            130.765997,
            130.793929,
            130.792208,
            130.779154,
            130.776542,
            130.775381,
            130.770825,
            130.779632,
            130.778442,
            130.77462,
            130.787379,
            130.747984,
            130.75577,
            130.745198,
            130.74626,
            130.767843,
            130.766789,
            130.771003,
            130.768891,
            130.778235,
            130.763405,
            130.704221,
            130.698625,
            130.70283,
            130.695025,
            130.67139,
            130.665237,
            130.676509,
            130.647610567625,
            130.634586,
            130.63292,
            130.636119,
            130.685916,
            130.691058,
            130.583855,
            130.591517,
            130.586976,
            130.590585,
            130.65709,
            130.649328,
            130.6468008,
            130.6504245,
            130.6827819,
            130.6865109,
            130.680424,
            130.680077,
            130.684143,
            130.678545,
            130.683822,
            130.656297,
            130.628934,
            130.627417,
            130.634497,
            130.694862,
            130.690747,
            130.694856,
            130.685321,
            130.689592,
            130.625217,
            130.614508,
            130.634725,
            130.642815,
            130.640674,
            130.643095,
            130.662154,
            130.653522,
            130.651588,
            130.659945,
            130.633948,
            130.653539,
            130.663054,
            130.62465,
            130.636153,
            130.636721,
            130.627347,
            130.681744,
            130.686871,
            130.694368,
            130.6970144,
            130.6889785,
            130.686263,
            130.691177,
            130.645822,
            130.720313,
            130.715791,
            130.705513,
            130.711245,
            130.705439,
            130.724035,
            130.728213,
            130.680967,
            130.684102,
            130.678073,
            130.660381,
            130.689465,
            130.691744,
            130.697754,
            130.699259,
            130.712253,
            130.716055,
            130.715102,
            130.708976,
            130.712454,
            130.681428,
            130.677426,
            130.681405,
            130.68216,
            130.67152,
            130.673652,
            130.667863,
            130.728886,
            130.7481883,
            130.740024,
            130.729282,
            130.726723,
            130.727294,
            130.7382964,
            130.713725,
            130.74537,
            130.744486,
            130.747705,
            130.693554,
            130.703005,
            130.704649,
            130.702977,
            130.758427,
            130.756616615079,
            130.674532,
            130.684282,
            130.697337,
            130.690622,
            130.707767,
            130.695545,
            130.6932352,
            130.721639,
            130.724312,
            130.728767,
            130.717805,
            130.730549,
            130.733967,
            130.722168,
            130.713302,
            130.716955,
            130.764407,
            130.7645015,
            130.760556,
            130.761389,
            130.765309,
            130.7448517,
            130.664769,
            130.662264,
            130.702587,
            130.709333,
            130.684976,
            130.687506,
            130.704104,
            130.695971,
            130.75355,
            130.755617,
            130.748286,
            130.659983,
            130.72358,
            130.724589966336,
            130.767996,
            130.772639,
            130.769646,
            130.780751,
            130.681721,
            130.686642,
            130.717646,
            130.70948,
            130.703236,
            130.6105499,
            130.7113432,
            130.6693642,
            130.6957953,
            130.6542919,
            130.6296829,
            130.7420971,
            130.6572173,
            130.5926186,
            130.7160725,
            130.7177427,
            130.807954,
            130.9660778,
            130.6299709,
            130.6232314,
            130.6483964,
            130.6638604,
            130.7911911,
            130.8751561,
            130.9051424,
            130.5987753,
            130.5729904,
            130.6167216,
            130.5881876,
            130.6036164,
            130.5973481,
            130.5589404,
            130.5922871,
            130.6398451,
            130.6141942,
            130.5905287,
            130.6485263,
            130.5941647,
            130.9139893,
            130.6457482,
            130.6947447,
            130.596347,
            130.6337742,
            130.5788893,
            130.5564617,
            130.890927,
            130.7163037,
            130.6330212,
            130.6226956,
            130.6524197,
            130.6013841,
            130.5844607,
            130.6244933,
            130.5993951,
            130.6535977,
            130.6031936,
            130.5916634,
            130.6018265,
            130.581584,
            130.616823,
            130.5947204,
            130.5741709,
            130.5840483,
            130.6140257,
            130.5759825,
            130.6124282,
            130.5797089,
            130.57916,
            130.6081132,
            130.6405948,
            130.5598938,
            130.6926444,
            130.5971988,
            130.6152536,
            130.6404608,
            130.6307977,
            130.5981173,
            130.6638143,
            130.635252,
            130.5579365,
            130.6350252,
            130.630074,
            130.6459534,
            130.6387179,
            130.615858,
            130.5745724,
            130.6036009,
            130.6408968,
            130.673679,
            130.6172245,
            130.6571188,
            130.6173808,
            130.6162265,
            130.5751754,
            130.5549444,
            130.6946373,
            130.6043476,
            130.6692674,
            130.6039066,
            130.6314221,
            130.5971055,
            130.6032852,
            130.6083267,
            130.6059444,
            130.6068469,
            130.6620706,
            130.6331534,
            130.6156407,
            130.6656367,
            130.6015176,
            130.6356907,
            130.6064595,
            130.6357005,
            130.5803311,
            130.6090224,
            130.6247454,
            130.6610728,
            130.7167759,
            130.7177839,
            130.7793851,
            130.8369844,
            130.6091784,
            130.766161803001,
            130.759861988962,
            130.769041,
            130.779006,
            130.762739,
            130.777083,
            130.754454459995,
            130.7599089,
            130.7530179,
            130.766611,
            130.7665345,
            130.7755376,
            130.775517,
            130.6822905,
            130.803153047577,
            130.803967450961,
            130.8021827,
            130.736667,
            130.736581,
            130.7361907,
            130.6890843,
            130.7395713,
            130.7391314,
            130.7450394,
            130.7195342,
            130.744494472988,
            130.7243576,
            130.740703,
            130.763906729041,
            130.437268,
            130.446704,
            130.436625,
            130.451434,
            130.463807,
            130.489071,
            130.482539,
            130.439497,
            130.447137};
    String name[] = { "出水小学校　",
            "熊本国府高校",
            "出水南小学校",
            "出水中学校",
            "出水南中学校",
            "湧心館高校",
            "一新小学校",
            "西山中学校",
            "二の丸公園",
            "第一高校",
            "大江交流室・公民館",
            "大江小学校",
            "白川中学校",
            "九州学院高校",
            "熊本大学大江体育館",
            "開新高校",
            "熊本学園大学",
            "子飼橋上流左岸",
            "帯山小学校",
            "帯山7丁目どんぐり公園",
            "帯山西小学校",
            "帯山中学校",
            "黒髪小学校",
            "桜山中学校",
            "竜南中学校",
            "市立必由館高校",
            "熊本大学黒髪運動場・黒髪体育館",
            "子飼橋上流右岸",
            "済々黌高校",
            "サンライフ熊本",
            "坪井中央公園",
            "慶徳小学校",
            "向山小学校",
            "江南中学校",
            "白川橋上・下流左岸",
            "長六橋上・下流左岸",
            "壼川小学校",
            "京陵中学校",
            "熊本大学附属小・中学校",
            "五福小学校",
            "五福交流室・公民館",
            "城東小学校",
            "藤園中学校",
            "銀座橋一帯白川川岸",
            "白川小学校",
            "熊本大学本荘体育館",
            "砂取小学校",
            "熊本商業高校",
            "熊本工業高校",
            "水前寺運動公園",
            "水前寺江津湖公園（水前寺地区）",
            "熊本市総合体育館・青年会館",
            "碩台小学校",
            "白川公園",
            "託麻原小学校",
            "熊本高校",
            "渡鹿公園",
            "白山小学校",
            "熊本大学薬学部運動場",
            "春竹小学校",
            "江原中学校",
            "八王寺中央公園",
            "本荘小学校",
            "秋津まちづくりセンター・公民館",
            "秋津小学校",
            "東野中学校",
            "秋津三丁目公園",
            "秋津西公園",
            "沼山津公園",
            "泉ヶ丘小学校",
            "水前寺江津湖公園（広木地区）",
            "画図小学校",
            "環境総合センター",
            "尾ノ上小学校",
            "錦ケ丘中学校",
            "錦ケ丘公園",
            "健軍小学校",
            "熊本マリスト学園",
            "湖東中学校",
            "水前寺江津湖公園（庄口公園）",
            "健軍東小学校",
            "東町中学校",
            "桜木小学校",
            "桜木東小学校",
            "桜木中学校",
            "託麻北小学校",
            "東部中学校",
            "託麻西小学校",
            "託麻東小学校",
            "二岡中学校",
            "託麻まちづくりセンター・公民館",
            "託麻南小学校",
            "託麻南中央公園",
            "月出小学校",
            "長嶺小学校",
            "長嶺中学校",
            "長嶺公園",
            "香りの森",
            "西原小学校",
            "西原中学校",
            "東海大学熊本星翔高校",
            "保田窪公園",
            "東町小学校",
            "第二高校",
            "山ノ内小学校",
            "山ノ内中央公園",
            "東稜高校",
            "若葉小学校",
            "池田小学校",
            "井芹中学校",
            "池田1丁目西児童遊園",
            "池亀公園",
            "池上小学校",
            "三和中学校",
            "池上中央公園",
            "西部公民館",
            "小島小学校",
            "城西中学校",
            "小島公園",
            "春日小学校",
            "くまもと森都心プラザ",
            "河内交流室・公民館",
            "河内小学校",
            "河内小学校白浜分校",
            "河内中学校",
            "城山小学校",
            "熊本西高校",
            "西部環境工場",
            "城山公園運動施設",
            "城西小学校",
            "市立千原台高校",
            "古荘公園",
            "石神山公園",
            "白坪小学校",
            "花陵中学校",
            "蓮台寺公園",
            "高橋小学校",
            "中島小学校",
            "中島中央公園",
            "白川中原緑地",
            "花園まちづくりセンター・公民館",
            "花園小学校",
            "花園五丁目公園",
            "柿原公園",
            "古町小学校",
            "旧松尾北小学校",
            "旧松尾西小学校",
            "旧松尾東小学校",
            "芳野小学校",
            "芳野中学校",
            "芳野コミュニティセンター",
            "飽田東小学校",
            "飽田中学校",
            "飽田公園運動場",
            "白川飽田緑地",
            "飽田西小学校",
            "飽田まちづくりセンター・公民館",
            "飽田南小学校",
            "奥古閑小学校",
            "天明中学校",
            "天明まちづくりセンター・公民館",
            "川口小学校",
            "川尻小学校",
            "城南中学校",
            "熊本農業高校",
            "緑川右岸第1号緑地",
            "緑川右岸第2号緑地",
            "南部まちづくりセンター・公民館",
            "城南小学校",
            "銭塘小学校",
            "田迎小学校",
            "託麻中学校",
            "平成中央公園",
            "田迎出仲間公園",
            "田迎西小学校",
            "田迎南小学校",
            "浜線健康パーク（田迎公園運動施設）",
            "富合小学校",
            "富合中学校",
            "アスパル富合",
            "中緑小学校",
            "日吉小学校",
            "白川平田十禅寺緑地",
            "日吉東小学校",
            "日吉中学校",
            "幸田まちづくりセンター・公民館",
            "御幸小学校",
            "木部中央公園",
            "御幸中央公園",
            "笛田中央公園",
            "力合小学校",
            "力合中学校",
            "白藤公園",
            "刈草中央公園",
            "力合西小学校",
            "南部総合スポーツセンター",
            "アクアドームくまもと",
            "城南福祉センター",
            "城南総合スポーツセンター",
            "火の君文化センター",
            "下益城城南中学校",
            "隈庄小学校",
            "杉上小学校",
            "城南物産館",
            "高グラウンド",
            "豊田小学校",
            "麻生田小学校",
            "清水新地公園",
            "植木小学校",
            "北部まちづくりセンター・公民館",
            "川上小学校",
            "北部中学校",
            "楠小学校",
            "楠中央公園",
            "鹿南中学校",
            "桜井小学校",
            "芝生広場",
            "五霊中学校",
            "山東小学校",
            "植木文化センター",
            "植木地域農産物の駅",
            "清水まちづくりセンター・公民館",
            "清水小学校",
            "清水スポーツセンター",
            "坪井川緑地",
            "城北小学校",
            "清水中学校",
            "八景水谷公園",
            "高平台小学校",
            "田底小学校",
            "龍田まちづくりセンター・公民館",
            "武蔵塚武道場",
            "龍田小学校",
            "龍田中学校",
            "武蔵塚公園",
            "龍田西小学校",
            "田原小学校",
            "田原スポーツ公園",
            "西里小学校",
            "ＴＫＵぷらざ",
            "今熊公園",
            "瑞厳寺公園",
            "北部公園",
            "熊本市食品交流会館",
            "楡木小学校",
            "楠中学校",
            "熊本北高校",
            "菱形小学校",
            "北部東小学校",
            "勤労青少年ホーム",
            "武蔵小学校",
            "武蔵中学校",
            "武蔵ケ丘中央公園",
            "弓削小学校",
            "山本小学校",
            "植木総合スポーツセンター公園",
            "植木北中学校",
            "吉松小学校",
            "吉松スポーツ公園",
            "総合体育館",
            "東陽スポーツセンター及びスポーツセンター",
            "さかもと青少年センター",
            "鮎帰社会教育センター",
            "中津道社会教育センター",
            "田上社会教育センター",
            "旧河俣小学校",
            "坂本コミュニティセンター",
            "麦島コミュニティセンター",
            "東陽定住センター及び東陽交流センターせせらぎ",
            "東陽地域福祉保健センター",
            "泉コミュニティセンター",
            "泉第八小",
            "太田郷コミュニティセンター",
            "サンライフ八代",
            "鏡コミュニティセンター",
            "龍峯コミュニティセンター",
            "泉憩いの家",
            "板木保口集会所",
            "振興センター五家荘",
            "植柳コミュニティセンター",
            "郡築コミュニティセンター",
            "高田コミュニティセンター",
            "金剛コミュニティセンター",
            "昭和コミュニティセンター",
            "代陽コミュニティセンター",
            "二見コミュニティセンター",
            "松高コミュニティセンター",
            "宮地コミュニティセンター",
            "八千把コミュニティセンター",
            "八代コミュニティセンター",
            "鏡保健センター",
            "旧敷川内分校",
            "久連子古代の里",
            "西部多目的集会施設",
            "深水生活改善センター",
            "久多良木多目的集会施設",
            "千丁コミュニティセンター",
            "日奈久コミュニティセンター",
            "大島石灰事務所",
            "五家荘自然塾",
            "東陽支所",
            "千丁支所",
            "太田郷小",
            "坂本中",
            "麦島小",
            "三中",
            "二中",
            "一中",
            "八竜小",
            "植柳小",
            "八代小",
            "代陽小",
            "日奈久小",
            "高田小",
            "松高小",
            "郡築小",
            "金剛小",
            "八千把小",
            "七中",
            "四中",
            "六中",
            "日奈久中",
            "保健センター",
            "宮地小",
            "二見小",
            "深水社会教育センター",
            "久多良木社会教育センター",
            "五中",
            "坂本地域福祉センター",
            "千丁中",
            "厚生会館",
            "龍峯小",
            "八中",
            "二見中",
            "千丁小",
            "千丁体育館",
            "鏡中学校",
            "さかもと温泉センター",
            "働く婦人の家",
            "弥次分校",
            "昭和小",
            "広域交流センター坂本館",
            "さかもと青少年センター分館",
            "坂本憩いの家",
            "坂本支所",
            "鶴喰生活改善センター",
            "百済来スポーツセンター",
            "日奈久温泉センター",
            "大島公民館（大島分校跡）",
            "鮎帰生活館",
            "八千把小浜分校",
            "旧宮地東小",
            "秀岳館高校",
            "白百合学園高校",
            "八代高校",
            "八代東高校",
            "中九州短期大学",
            "八代工業高校",
            "八代工業高等専門学校",
            "鏡小学校",
            "文政小学校",
            "八代高等職業訓練校",
            "有佐小学校",
            "八代実業専門学校",
            "鏡西部小",
            "市民球場",
            "古麓公民館",
            "新開新浜町公民館",
            "ハーモニーホール",
            "清流高校",
            "八代農業高校",
            "東陽小学校",
            "東陽中学校",
            "旧泉第一小学校",
            "かやばの里",
            "希望の里たいよう",
            "人吉東小学校グラウンド",
            "第一中学校グラウンド",
            "人吉高校グラウンド",
            "梢山多目的グラウンド",
            "人吉城跡ふるさと歴史の広場",
            "中小企業大学校グラウンド",
            "人吉西小学校グラウンド",
            "東西コミュニティセンター",
            "球磨工業高校グラウンド",
            "東間小学校",
            "東間小学校グラウンド",
            "東間コミュニティセンター",
            "川上哲治記念球場",
            "田野活性化センター",
            "大畑小学校グラウンド",
            "第三中学校グラウンド",
            "大畑コミュニティセンター",
            "西瀬小学校",
            "西瀬小学校グラウンド",
            "西瀬コミュニティセンター",
            "西瀬コミュニティセンター鹿目分館",
            "カルチャーパレス",
            "人吉スポーツパレス",
            "人吉球磨能力開発センター",
            "中原小学校",
            "第二中学校グラウンド",
            "中原コミュニティセンター",
            "人吉第一市民運動広場",
            "人吉市保健センター",
            "第一小学校",
            "荒尾市民病院",
            "万田小学校",
            "万田炭鉱館",
            "荒尾総合文化センター",
            "みどり蒼生館",
            "小岱工芸館",
            "有明小学校",
            "清里小学校"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);
        if (ContextCompat.checkSelfPermission(this,
                Manifest.permission.ACCESS_FINE_LOCATION) !=
                PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(this,
                    new String[]{Manifest.permission.ACCESS_FINE_LOCATION,},
                    1000);
        }
        else{
            locationStart();

            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                    1000, 50, this);

        }
    }


    /**
     * Manipulates the map once available.
     * This callback is triggered when the map is ready to be used.
     * This is where we can add markers or lines, add listeners or move the camera. In this case,
     * we just add a marker near Sydney, Australia.
     * If Google Play services is not installed on the device, the user will be prompted to install
     * it inside the SupportMapFragment. This method will only be triggered once the user has
     * installed Google Play services and returned to the app.
     */
    private void locationStart(){
        Log.d("debug","locationStart()");

        // LocationManager インスタンス生成
        locationManager =
                (LocationManager) getSystemService(LOCATION_SERVICE);

        if (locationManager != null && locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            Log.d("debug", "location manager Enabled");
        } else {
            // GPSを設定するように促す
            Intent settingsIntent =
                    new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(settingsIntent);
            Log.d("debug", "not gpsEnable, startActivity");
        }

        if (ContextCompat.checkSelfPermission(this,
                Manifest.permission.ACCESS_FINE_LOCATION) !=
                PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(this,
                    new String[]{Manifest.permission.ACCESS_FINE_LOCATION,}, 1000);

            Log.d("debug", "checkSelfPermission false");
            return;
        }

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                1000, 50, this);

    }

    @Override
    public void onRequestPermissionsResult(
            int requestCode, @NonNull String[]permissions, @NonNull int[] grantResults) {
        if (requestCode == 1000) {
            // 使用が許可された
            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                Log.d("debug","checkSelfPermission true");

                locationStart();

            } else {
                // それでも拒否された時の対応
                Toast toast = Toast.makeText(this,
                        "これ以上なにもできません", Toast.LENGTH_SHORT);
                toast.show();
            }
        }
    }


    @Override
    public void onLocationChanged(Location location) {
        double ido = location.getLatitude();
// 経度の表示
        double keido = location.getLongitude();
        double min = 100000;
        int mini = 0;
        Map<Integer, Double> kyoriList = new HashMap<Integer, Double>();
        /*float  min = 1000000;
        int mini;*/
        for(int i = 0;i < x_data.length; i++){
            double kyori = (x_data[i]-ido)*(x_data[i]-ido) + (y_data[i]-keido)*(y_data[i]-keido);
            kyoriList.put(i,kyori);
            /*if(kyori < min){
                mini = i;
                min = kyori;
            }*/
        }
        List<Entry<Integer, Double>> list_entries = new ArrayList<Entry<Integer,Double>>(kyoriList.entrySet());
        Collections.sort(list_entries, new Comparator<Entry<Integer, Double>>() {
            public int compare(Entry<Integer, Double> obj1, Entry<Integer, Double> obj2) {
                // 4. 昇順
                return obj1.getValue().compareTo(obj2.getValue());
            }
            
        });

        // 起点の緯度経度
        String src_lat = String.valueOf(ido);
        String src_ltg = String.valueOf(keido);

        // 目的地の緯度経度
        String des_lat = String.valueOf(x_data[mini]);
        String des_ltg = String.valueOf(y_data[mini]);

        //Intent = 外部のGoogleMap
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);

        intent.setClassName("com.google.android.apps.maps",
                "com.google.android.maps.MapsActivity");

        // 起点の緯度,経度, 目的地の緯度,経度
        String str = String.format(Locale.US,
                "http://maps.google.com/maps?saddr=%s,%s&daddr=%s,%s",
                src_lat, src_ltg, des_lat, des_ltg);

        intent.setData(Uri.parse(str));
        startActivity(intent);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onProviderDisabled(String provider) {

    }
}
